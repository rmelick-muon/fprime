A network packet in FPrime is built up from several layers.

From outside to inside

# Framing
Framing is 

This is possible to customize by implementing a different `FramingProtocol`
* Documentation:
  * https://github.com/nasa/fprime/blob/devel/Svc/Framer/docs/sdd.md
  * https://github.com/nasa/fprime/blob/master/Svc/FramingProtocol/docs/sdd.md
* Default Implementation: `FPrimeFraming::frame` (https://github.com/nasa/fprime/blob/master/Svc/FramingProtocol/FprimeProtocol.cpp#L24)

If the packet type is unknown.  This would apply to data passed to the Framer over its `comIn` port (telemetry, etc.)
```
FPRIME_START_WORD | size of inner data | inner serialized data (without length) | checksum 

0xDEADBEEF, Data size, ||| inner packet format ||| Checksum
```

If the packet type is known.  From reading the [Framer documentation](https://github.com/nasa/fprime/blob/devel/Svc/Framer/docs/sdd.md), this 
is only ever `FW_PACKET_FILE`, because the framer receives that over its `bufferIn` port.
```
FPRIME_START_WORD | size of inner data and packet_type | packet_type | inner serialized data (without length) | checksum 

0xDEADBEEF, Data size, ||| inner packet format ||| Checksum
```



Framing is called from the following places
* `comIn_handler`: https://github.com/nasa/fprime/blob/devel/Svc/Framer/Framer.cpp#L48
* `bufferIn_handler`: https://github.com/nasa/fprime/blob/devel/Svc/Framer/Framer.cpp#L61

Framing is also reimplemented in `GroundInterfaceComponentImpl::frame_send`: https://github.com/nasa/fprime/blob/devel/Svc/GroundInterface/GroundInterface.cpp#L97
except this does not include the Checksum

# Connecting to the framer
The framer has been invoked by data being passed to the [Svc::Framer](https://github.com/nasa/fprime/blob/devel/Svc/Framer/docs/sdd.md)

This is done through the component configuration.  For example, the in [Ref application](https://github.com/nasa/fprime/blob/master/Ref/Top/RefTopologyAppAi.xml#L56) you can see
First, a component named `downlink` is defined that is a `Framer`.
```xml
<instance namespace="Svc" name="downlink" type="Framer" base_id="0x4100" base_id_window="0"/>
```

And, the component that will connect to the `downlink` are also defined
```xml
<instance namespace="Svc" name="eventLogger" type="ActiveLogger" base_id="0xB00" base_id_window="5"/>
<instance namespace="Svc" name="chanTlm" type="TlmChan" base_id="0xC00" base_id_window="0"/>
<instance namespace="Svc" name="fileDownlink" type="FileDownlink" base_id="0x700" base_id_window="9"/>
```

Then, several components are connected that the `downlink` component.
First, the `chanTlm` and `eventLogger` are connected to `comIn`
```xml
<connection name="[unused]">
    <source component="chanTlm" port="PktSend" type="[unused]" num="0"/>
    <target component="downlink" port="comIn" type="[unused]" num="0"/>
</connection>
<connection name="[unused]">
    <source component="eventLogger" port="PktSend" type="[unused]" num="0"/>
    <target component="downlink" port="comIn" type="[unused]" num="0"/>
</connection>
```
And then `fileDownlink` is connected to `bufferSendOut`
```xml
<connection name="[unused]">
<source component="fileDownlink" port="bufferSendOut" type="[unused]" num="0"/>
<target component="downlink" port="bufferIn" type="[unused]" num="0"/>
</connection>
```

# Inner serialized data
So, we now need to examine the classes `ActiveLogger`, `TlmChan`, and `FileDownlink` to understand how they create
the `const U8* const data` which was passed to the framer.

## TlmChan

## ActiveLogger

## FileDownlink


# List of packet structures
| Packet    | Generated by | packet structure |
|-----------|--------------|------------------|
| file      |              |                  |
| telemetry |              |                  |

# Open questions
* In FprimeFraming::frame, the last line is `m_interface->send(buffer);`.  Does this modify the outgoing
data in any way, for example adding the length?
* Why does `GroundInterfaceComponentImpl::frame_send` re-implement framing, instead of using the FPrimeFraming?